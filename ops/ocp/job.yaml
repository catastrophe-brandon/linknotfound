apiVersion: batch/v1
kind: Job
metadata:
  name: linknotfound-job
  namespace: insights-qe-dev
spec:
  selector: {}
  template:
    metadata:
      name: linknotfound-job
    spec:
      containers:
        - name: linknotfound-scanner
          image: image-registry.openshift-image-registry.svc:5000/insights-qe-dev/linknotfound
          envFrom:
            - secretRef:
                name: linknotfound-secrets
          env:
            - name: LINKNOTFOUND_RUN
              value: scan
          imagePullPolicy: IfNotPresent
          resources:
            limits:
              cpu: 500m
              memory: 4Gi
            requests:
              cpu: 200m
              memory: 2Gi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Never
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
successfulJobsHistoryLimit: 1
failedJobsHistoryLimit: 1
